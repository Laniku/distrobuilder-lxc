language: go
arch: arm64-graviton2 # in AWS over Graviton2 CPU
virt: lxd             # required, routes to an LXD container
os: linux             # required for arch different than amd64
dist: focal           # or bionic | xenial with xenial as default
group: edge
install:
  - export GOPATH="${TRAVIS_BUILD_DIR}/Godeps/_workspace:$GOPATH"
  - export PATH="${TRAVIS_BUILD_DIR}/Godeps/_workspace/bin:$PATH"
  - echo "${TRAVIS_BUILD_DIR}"
  - cd /tmp
  - wget https://linuxcontainers.org/downloads/distrobuilder/distrobuilder-1.1.tar.gz --directory-prefix=/tmp/
  - ls
  - tar -xvf /tmp/distrobuilder-1.1.tar.gz
  - cd distrobuilder-1.1
  - ls
  - sudo apt install snapd
  - sudo snap install distrobuilder --classic
  - mkdir -p ContainerImages/ubuntu/
  - cd ContainerImages/ubuntu/
  - cp /tmp/distrobuilder-1.1/doc/examples/ubuntu.yaml ubuntu.yaml
  - sudo distrobuilder build-lxc ubuntu.yaml
